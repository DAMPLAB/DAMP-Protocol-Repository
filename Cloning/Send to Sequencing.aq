{"config":{"title":"Send to Sequencing","description":"No description given","copyright":"No copyright declared","version":"no version info","authors":[],"maintainer":{"name":"No maintainer","email":"noone@nowehere"},"acknowledgements":[],"github":{"repo":"none","user":"none","access_token":"none"},"keywords":[],"aquadoc_version":"1.0.0"},"components":[{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker 1","ftype":"string","choices":"Amp, Cam, Carb, Kan, Spec, Strep, Other, N/A","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2020-03-05T14:47:09.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS, TRP, URA, LEU, NatMX, KanMX, HygMX, BleoMX ,5FOA, N/A, Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-07-24T14:23:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":2246,"parent_id":2,"name":"Alias","ftype":"string","choices":"Promoter, CDS, Terminator, Backbone, RBS, Marker, Insulator, Reporter Plasmid, Gate, Circuit w/ Reporter Plasmid, Other, N/A","array":false,"required":false,"created_at":"2017-08-28T09:14:15.000-07:00","updated_at":"2020-03-05T14:51:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":10458,"parent_id":2,"name":"Bacterial Marker 2","ftype":"string","choices":"Amp, Cam, Carb, Kan, Spec, Strep, Other, N/A","array":false,"required":true,"created_at":"2020-03-05T14:47:09.000-08:00","updated_at":"2020-03-05T14:47:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2207,"parent_id":1,"name":"URL","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2017-07-24T14:21:24.000-07:00","updated_at":"2017-07-24T14:21:24.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":571,"name":"Plasmid Stock","description":"A plasmid stock that has yet to be sequenced verified","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"{ \"min_conc\": 0.000000005, \"rec_conc\": 0.000000025, \"max_vol\": 1500, \"conc_callback\": \"nanodrop_dsdna\", \"short_description\":\"1.5 mL tube\", \"opentrons_labware\": \"24-well-1.5ml-rack\"}","vendor":"No vendor information","created_at":"2017-03-31T15:34:41.000-07:00","updated_at":"2018-09-19T18:46:08.000-07:00","unit":"Plasmid","cost":0.01,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"M20P","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":322,"name":"Primer Stock","description":"Rehydrated primer in tube from IDT - 100uM","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"{ \"min_conc\": 0.000010, \"rec_conc\": 0.000025, \"max_vol\": 1500, \"conc_callback\": \"manually_enter_uM_conc\", \"short_description\":\"1.5 mL tube\", \"opentrons_labware\": \"24-well-1.5ml-rack\"}","vendor":"No vendor information","created_at":"2014-01-22T16:56:36.000-08:00","updated_at":"2018-09-04T19:56:25.000-07:00","unit":"Base","cost":0.26,"release_method":"return","release_description":"","sample_type_id":1,"image":"","prefix":"M20O","rows":null,"columns":null,"sample_type_name":"Primer"}],"operation_type":{"name":"Send to Sequencing","category":"Cloning","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Plasmid","sample_types":["Plasmid"],"object_types":["Plasmid Stock"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":483,"preferred_field_type_id":5604,"choices":null},{"ftype":"sample","role":"input","name":"Sequencing Primer","sample_types":["Primer"],"object_types":["Primer Stock"],"part":false,"array":false,"routing":"SP","preferred_operation_type_id":481,"preferred_field_type_id":5600,"choices":null},{"ftype":"sample","role":"output","name":"Plasmid","sample_types":["Plasmid"],"object_types":["Plasmid Stock"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"needs \"Standard Libs/Debug Lib\"\nneeds \"Standard Libs/Ordering Lib\"\nneeds \"Cloning Libs/Cloning\"\nneeds \"Cloning Libs/OpenTronsAq\"\n\nclass Protocol\n  include Debug\n  include Cloning\n  include Ordering\n  include OpenTronsAq\n  \n  require 'date'\n  \n  PLASMID = \"Plasmid\"\n  PRIMER = \"Sequencing Primer\"\n  REACTION_VOLUME = 15\n  STRIPWELL_LENGTH = 8\n\n  def main\n    current_taken_items = []\n    # Remember to add volume information to input and output object types (and concentration data where applicable).\n    input_volumes = {PLASMID =\u003e 10, PRIMER =\u003e 1}\n\n    check_user_inputs [PLASMID, PRIMER], input_volumes, current_taken_items\n    return {} if check_for_errors\n    operations.sort_by! {|op| op.input(PLASMID).item.id}\n\n    operations.running.each do |op|\n        water_to_add = REACTION_VOLUME - input_volumes[PLASMID] - input_volumes[PRIMER]\n        op.temporary[:water_to_add] = water_to_add\n    end\n\n    robust_take_inputs [PLASMID, PRIMER], current_taken_items, interactive: true\n\n    operations.running.each_with_index do |op, i|\n        op.pass(PLASMID)\n        op.temporary[:well_number] = i + 1\n    end\n\n    show do\n      title \"Prepare stripwells for sequencing reaction\"\n      (operations.running.count.to_f / STRIPWELL_LENGTH).ceil.times do |i|\n        check \"Prepare a #{STRIPWELL_LENGTH}-well stripwell, and label the first well with #{i * STRIPWELL_LENGTH + 1} and the last well with #{i * STRIPWELL_LENGTH + STRIPWELL_LENGTH}\"\n      end\n    end\n\n    ot2_choice = show do\n        title \"Select execution method\"\n        select [\"Yes\", \"No\"], var: \"ot2\", label: \"Is the OT2 robot available?\"\n    end\n\n    if ot2_choice[:ot2] == \"Yes\"\n\n        prot = OTAqProtocol.new\n\n        prot.add_labware_definition('24-well-1.5ml-rack')\n\n        water_container = prot.labware.load('point', '1', 'Water')\n        water = prot.dummy_item \"DI Water\"\n        prot.assign_wells [water], [water_container.wells(0)]\n\n        td = prot.modules.load('tempdeck', '10')\n        temp_deck_tubes = prot.labware.load('PCR-strip-tall', '10', 'Temp deck w/ PCR tubes')\n\n        tip_racks = []\n        tip_racks \u003c\u003c prot.labware.load('tiprack-10ul', '3')\n        tip_racks \u003c\u003c prot.labware.load('tiprack-10ul', '6')\n        p10 = prot.instruments.P10_Single(mount: 'right', tip_racks: tip_racks)\n\n        prot.assign_wells operations.running.map{|op| op.input(PLASMID).item}.uniq\n        prot.assign_wells operations.running.map{|op| op.input(PRIMER).item}.uniq\n\n        operations.running.each_with_index do |op, i|\n            op.temporary[:dummy_tube] = prot.dummy_item \"Seq Reaction #{i + 1}\"\n            \n            # adding extra rows to accomodate tube caps.\n            prot.assign_wells [op.temporary[:dummy_tube]], [temp_deck_tubes.wells(i + 8 * (i / 8))]\n        end\n\n        # Add templates\n        operations.running.each do |op|\n            p10.pick_up_tip\n            p10.aspirate(input_volumes[PLASMID], prot.find_well(op.input(PLASMID).item).bottom(0))\n            p10.dispense(input_volumes[PLASMID], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.drop_tip\n        end\n\n        # Add water\n        operations.running.each do |op|\n            p10.pick_up_tip\n            p10.aspirate(op.temporary[:water_to_add], water_container.wells(0).bottom(0))\n            p10.dispense(op.temporary[:water_to_add], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.drop_tip\n        end\n\n        # Add primers\n        operations.running.each do |op|\n            p10.pick_up_tip\n            p10.aspirate(input_volumes[PRIMER], prot.find_well(op.input(PRIMER).item).bottom(0))\n            p10.dispense(input_volumes[PRIMER], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            \n            # Mix\n            p10.aspirate(input_volumes[PLASMID], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.dispense(input_volumes[PLASMID], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.aspirate(input_volumes[PLASMID], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.dispense(input_volumes[PLASMID], prot.find_well(op.temporary[:dummy_tube]).bottom(0))\n            p10.drop_tip\n        end\n\n        run_protocol prot\n\n    else\n\n        show do\n          title \"Load stripwells with DI water\"\n          note \"Load stripwells with DI water\"\n          table operations.start_table\n            .custom_column(heading: \"Well number\") {|op| op.temporary[:well_number]}\n            .custom_column(heading: \"Water to add\") { |op| {content: \"#{op.temporary[:water_to_add]} µl of water\", check: true} }\n            .end_table\n        end\n\n        show do\n          title \"Load stripwells with DNA template\"\n          note \"Load stripwells with DNA template\"\n          table operations.start_table\n            .custom_column(heading: \"Well number\") {|op| op.temporary[:well_number]}\n            .custom_column(heading: \"DNA template to add\") { |op| {content: \"#{input_volumes[PLASMID]} µl of #{op.input(PLASMID).item.id}\", check: true} }\n            .end_table\n        end\n\n        show do\n          title \"Load stripwells with primer\"\n          note \"Load stripwells with primer\"\n          table operations.start_table\n            .custom_column(heading: \"Well number\") {|op| op.temporary[:well_number]}\n            .custom_column(heading: \"Primer to add\") { |op| {content: \"#{input_volumes[PRIMER]} µl of #{op.input(PRIMER).item.id}\", check: true} }\n            .end_table\n        end\n    end\n\n    robust_release_inputs [PLASMID, PRIMER], current_taken_items, interactive: true\n\n    table_matrix = Array.new() {Array.new()}\n    operations.running.each_with_index do |op, i|\n        table_matrix[i] = [\n            op.input(PLASMID).item.id.to_s, \n            op.input(PLASMID).sample.sample_type.name == \"Plasmid\" ? \"Plasmid\" : \"Purified PCR\", \n            op.input(PLASMID).sample.properties[\"Length\"].to_s,\n            \"80\",\n            \"Yes\",\n            op.input(PRIMER).sample.id.to_s,\n            \"1.67\",\n            op.input(PLASMID).item.get(:concentration_keyword) == \"STANDARD\" ? \"None\" : \"Hairpin\"\n            ]\n    end\n\n    nickname = \"Job #{JobAssociation.where(operation_id: operations[0].id).first.id}\"\n\n    # create Quintara order\n    genewiz = show do\n      title \"Create a Quintara order\"\n      check \"Go the \u003ca href='http://www.quintarabio.com/' target='_blank'\u003eQUINTARA website\u003c/a\u003e, log in with lab account (Username: damplab@bu.edu, Password: cidar01).\"\n      #check \"In 'My Sanger Sequencing', choose 'Excel File Upload', 'Choose File', 'Upload', #{operations.running.running.length} samples.\"\n      #check \"Confirm that the information, in general, is correct.\"\n      check \"Click \\\"Order\\\" (top navigation bar) -\u003e \\\"Sequencing Order Form\\\" (top link in menu on the lefthand side).\"\n      check \"Paste in the following information:\"\n      table table_matrix\n      check \"TYPE (do not copy paste) the following into the \\\"Nick Name Order\\\" box: #{nickname}\"\n      check \"Click \\\"Order\\\" -\u003e \\\"Confirm\\\" and enter the Quintara Order ID below.\"\n      get \"text\", var: \"tracking_num\", label: \"Enter the Quintara Order ID\", default: \"3756939\"\n      check \"Get out a zip-lock bag and label in black marker with the Quintara Order ID.\"\n    end\n\n    # store stripwells in dropbox\n    show {\n      title \"Put all stripwells in the Quintara dropbox\"\n      check \"Cap all of the stripwells.\"\n      check \"Put the stripwells into the zip-lock bag.\"\n      check \"Ensure that the bag is sealed, and put it into the Quintara dropbox.\"\n    }\n\n    # associate order data with plasmid items\n    #operations.running.each do |op|\n    #  op.set_output_data PLASMID, :tracking_num, genewiz[:tracking_num]\n    #end\n    \n    place_seq_order [\"Quintara\", operations.running.count, operations.running.count*4, Date.today.strftime('%m/%d/%Y'), \"Aquarium\", nickname, \"DLN\"]\n\n    return {}\n\n  end\n\nend\n","precondition":"def precondition(op)\n  true\nend","cost_model":"#Send to Sequencing Cost Model\n# All related numbers come from 'Damp Lab Services_Dec2019'\n# materials are calculated on 'Damp Lab Services_Dec2019'\n# l stands for labor\n\ndef cost(op)\n    l = 43.49 * Parameter.get_float('labor rate (min)')\n    {labor: 0, materials: 4.19+l }\nend","documentation":"This is run after \u003cb\u003eMake Miniprep\u003c/b\u003e and is a precursor to \u003cb\u003eUpload Sequencing Results\u003c/b\u003e. The plasmid will be submitted for standard sanger sequencing using the specified primer stock.\u003cbr\u003e\u003cbr\u003e\n\n------\u003cb\u003eInput Volume(s)\u003c/b\u003e------\u003cbr\u003e\nPlasmid -\u003e 10 µl\u003cbr\u003e\nSequencing Primer -\u003e 1 µl\u003cbr\u003e\u003cbr\u003e\n\n\u003cb\u003eImportant notes on user confirmation of sequencing results:\u003c/b\u003e\u003cbr\u003e\n    -\"Send to Sequencing\" should always be followed by \"Upload Sequencing Results\"\u003cbr\u003e\n    -If \"Confirm Sequencing Results\" is added after \"Upload Sequencing Results\", anything downstream of \"Confirm Sequencing Results\" will wait for the user to confirm or reject the sequencing results before continuing.\u003cbr\u003e\n    -When sequencing results arrive, you will receive an email with instructions on how to view and confirm/reject your results.\u003cbr\u003e","test":"","timing":null}}]}