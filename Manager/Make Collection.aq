{"config":{"title":"Make Collection","description":"No description given","copyright":"No copyright declared","version":"no version info","authors":[],"maintainer":{"name":"No maintainer","email":"noone@nowehere"},"acknowledgements":[],"github":{"repo":"none","user":"none","access_token":"none"},"keywords":[],"aquadoc_version":"1.0.0"},"components":[{"sample_types":[],"object_types":[{"id":440,"name":"Stripwell","description":"Stripwell","min":0,"max":10000,"handler":"collection","safety":"No safety information","cleanup":"No cleanup information","data":"  {\r\n    \"materials\": 1.00,\r\n    \"labor\": 0.00\r\n  }","vendor":"No vendor information","created_at":"2014-08-28T17:19:55.000-07:00","updated_at":"2017-12-15T09:27:33.000-08:00","unit":"stripwell","cost":1.0,"release_method":"query","release_description":"","sample_type_id":null,"image":"","prefix":"M20SRX","rows":1,"columns":8,"sample_type_name":null}],"operation_type":{"name":"Make Collection","category":"Manager","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"Batch","sample_types":[null],"object_types":["Stripwell"],"part":false,"array":false,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# This is a default, one-size-fits all protocol that shows how you can \n# access the inputs and outputs of the operations associated with a job.\n# Add specific instructions for this protocol!\n\nclass Protocol\n\n  def main\n      \n    op = operations.first\n    operations.make    \n    op.output(\"Batch\").item.mark_as_deleted\n    \n    item_info = show do\n        title \"What type of Collection do you want to create?\"\n        note \"object type name must be exactly correct\"\n        \n        get \"text\", var: \"object_type\", label: \"Object type\", default: \"Stripwell\"\n        get \"text\", var: \"location\", label: \"Location\", default: \"Bench\"\n    end\n     \n    object_type = ObjectType.find_by_name(item_info[:object_type])\n    new_item = produce new_collection object_type.name\n    \n    op.output(\"Batch\").set item: new_item\n\n    show do\n        title \"Colleciton Created!\"\n        \n        note \"Made new #{op.output(\"Batch\").item.object_type.name}\"\n        note \"Collection link #{op.output(\"Batch\").item}\"\n        note \"Now we will populate the collection with samples of your choice\"\n    end\n    \n    \n    coll = op.output(\"Batch\").collection\n    coll.location = item_info[:location]\n    continue = true\n    while continue\n        add = show do \n            title \"how many samples to add to #{coll.id}\"\n            \n            \n            get \"number\", var: \"sample\", label: \"Sample id to add\", default: 7\n            get \"number\", var: \"add\", label: \"how many to add\", default: 0\n            select [\"Yes\", \"No\"], var: \"continue\", label: \"I want to add a different sample as well\", default: 1\n        end        \n        \n        sample = Sample.find(add[:sample])\n        \n        add[:add].times do\n            coll.add_one sample\n        end\n        continue = add[:continue] == \"Yes\"\n    end\n    \n    show do \n        title \"Collection finsished and ready to use\"\n        \n        note \"Use the \\'edit collection\\' protocol to add or remove samples\"\n        table coll.matrix\n    end\n    \n    \n    \n    operations.store\n    \n    return {}\n    \n  end\n\nend\n","precondition":"def precondition(op)\n  true\nend","cost_model":"def cost(op)\n  { labor: 0, materials: 0 }\nend","documentation":"Documentation here. Start with a paragraph, not a heading or title, as in most views, the title will be supplied by the view.","test":"","timing":null}}]}