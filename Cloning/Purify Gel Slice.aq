{"config":{"title":"Purify Gel Slice","description":"No description given","copyright":"No copyright declared","version":"no version info","authors":[],"maintainer":{"name":"No maintainer","email":"noone@nowehere"},"acknowledgements":[],"github":{"repo":"none","user":"none","access_token":"none"},"keywords":[],"aquadoc_version":"1.0.0"},"components":[{"sample_types":[{"id":4,"name":"Fragment","description":"A linear double stranded piece of DNA from PCR or Restriction Digest","created_at":"2013-10-16T14:33:41.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":11,"parent_id":4,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2018-02-16T23:49:44.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":12,"parent_id":4,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:17:39.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":13,"parent_id":4,"name":"Template","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-12T19:07:59.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":2,"field_type_id":13,"sample_type_id":2,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}},{"id":3,"field_type_id":13,"sample_type_id":3,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":3,"name":"E. coli strain","description":"A strain of E. coli distinguished from others by genomic (not plasmid) modifications.","created_at":"2013-10-15T10:16:52.000-07:00","updated_at":"2017-07-24T14:24:50.000-07:00"}},{"id":4,"field_type_id":13,"sample_type_id":4,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":4,"name":"Fragment","description":"A linear double stranded piece of DNA from PCR or Restriction Digest","created_at":"2013-10-16T14:33:41.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Plasmid","E. coli strain","Fragment"],"object_types":[null,null,null]},{"id":14,"parent_id":4,"name":"Forward Primer","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-12T19:07:59.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":6,"field_type_id":14,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":15,"parent_id":4,"name":"Reverse Primer","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-12T19:07:59.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":7,"field_type_id":15,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":6036,"parent_id":4,"name":"Raw Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2018-02-16T23:48:20.000-08:00","updated_at":"2018-02-16T23:48:20.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker 1","ftype":"string","choices":"Amp, Cam, Carb, Kan, Spec, Strep, Other, N/A","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2020-03-05T14:47:09.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS, TRP, URA, LEU, NatMX, KanMX, HygMX, BleoMX ,5FOA, N/A, Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-07-24T14:23:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":2246,"parent_id":2,"name":"Alias","ftype":"string","choices":"Promoter, CDS, Terminator, Backbone, RBS, Marker, Insulator, Reporter Plasmid, Gate, Circuit w/ Reporter Plasmid, Other, N/A","array":false,"required":false,"created_at":"2017-08-28T09:14:15.000-07:00","updated_at":"2020-03-05T14:51:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":10458,"parent_id":2,"name":"Bacterial Marker 2","ftype":"string","choices":"Amp, Cam, Carb, Kan, Spec, Strep, Other, N/A","array":false,"required":true,"created_at":"2020-03-05T14:47:09.000-08:00","updated_at":"2020-03-05T14:47:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"The primer stock solutions are diluted to 25 uM. Primer melting temperatures should be calculated using the **NEB Tm calculator http://tmcalculator.neb.com/#!/main configured for Phusion High-Fidelity DNA Polymerase (HF Buffer)** for standard PCR reaction","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2018-02-25T04:40:37.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2207,"parent_id":1,"name":"URL","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2017-07-24T14:21:24.000-07:00","updated_at":"2017-07-24T14:21:24.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":3,"name":"E. coli strain","description":"A strain of E. coli distinguished from others by genomic (not plasmid) modifications.","created_at":"2013-10-15T10:16:52.000-07:00","updated_at":"2017-07-24T14:24:50.000-07:00","field_types":[{"id":10,"parent_id":3,"name":"Parent","ftype":"sample","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-07-24T14:24:50.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":1,"field_type_id":10,"sample_type_id":3,"object_type_id":null,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T20:40:31.000-07:00","sample_type":{"id":3,"name":"E. coli strain","description":"A strain of E. coli distinguished from others by genomic (not plasmid) modifications.","created_at":"2013-10-15T10:16:52.000-07:00","updated_at":"2017-07-24T14:24:50.000-07:00"}}],"sample_types":["E. coli strain"],"object_types":[null]}]},{"id":40,"name":"Digested DNA","description":"Temporary samples containing a digested piece of double stranded DNA.","created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-01-31T15:55:23.000-08:00","field_types":[{"id":2710,"parent_id":40,"name":"Input DNA","ftype":"sample","choices":null,"array":false,"required":true,"created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-03-02T07:42:32.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":2527,"field_type_id":2710,"sample_type_id":2,"object_type_id":null,"created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-01-31T16:21:28.000-08:00","sample_type":{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}},{"id":2532,"field_type_id":2710,"sample_type_id":4,"object_type_id":null,"created_at":"2018-01-31T16:21:28.000-08:00","updated_at":"2018-01-31T16:21:28.000-08:00","sample_type":{"id":4,"name":"Fragment","description":"A linear double stranded piece of DNA from PCR or Restriction Digest","created_at":"2013-10-16T14:33:41.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Plasmid","Fragment"],"object_types":[null,null]},{"id":2713,"parent_id":40,"name":"Restriction Enzyme 1","ftype":"sample","choices":"EcoRI, SpeI, XbaI, SacI","array":false,"required":true,"created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-02-01T12:33:34.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":2533,"field_type_id":2713,"sample_type_id":6,"object_type_id":null,"created_at":"2018-01-31T16:21:28.000-08:00","updated_at":"2018-01-31T16:21:28.000-08:00","sample_type":{"id":6,"name":"Enzyme","description":"Enzymes in 1.5 mL tubes stored at -20C","created_at":"2013-12-31T10:23:07.000-08:00","updated_at":"2015-12-08T17:39:25.000-08:00"}}],"sample_types":["Enzyme"],"object_types":[null]},{"id":2714,"parent_id":40,"name":"Restriction Enzyme 2","ftype":"sample","choices":null,"array":false,"required":true,"created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-02-01T12:33:34.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":2529,"field_type_id":2714,"sample_type_id":6,"object_type_id":null,"created_at":"2018-01-31T15:55:23.000-08:00","updated_at":"2018-01-31T16:21:28.000-08:00","sample_type":{"id":6,"name":"Enzyme","description":"Enzymes in 1.5 mL tubes stored at -20C","created_at":"2013-12-31T10:23:07.000-08:00","updated_at":"2015-12-08T17:39:25.000-08:00"}}],"sample_types":["Enzyme"],"object_types":[null]},{"id":2759,"parent_id":40,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-02-01T12:33:34.000-08:00","updated_at":"2018-02-01T12:33:34.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":6,"name":"Enzyme","description":"Enzymes in 1.5 mL tubes stored at -20C","created_at":"2013-12-31T10:23:07.000-08:00","updated_at":"2015-12-08T17:39:25.000-08:00","field_types":[{"id":2222,"parent_id":6,"name":"Vendor","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2017-08-10T11:14:33.000-07:00","updated_at":"2017-08-10T11:14:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2223,"parent_id":6,"name":"Vendor #","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2017-08-10T11:14:33.000-07:00","updated_at":"2017-08-10T11:14:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2226,"parent_id":6,"name":"Lot #","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2017-08-10T11:14:50.000-07:00","updated_at":"2017-08-10T11:14:50.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":292,"name":"Gel Slice","description":"Gel Slice cut from a gel lane after gel was run. Often placed in a 1.5 mL tube.","min":0,"max":1000,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2014-01-10T15:30:06.000-08:00","updated_at":"2017-09-06T11:28:26.000-07:00","unit":"Fragment","cost":10.0,"release_method":"dispose","release_description":"","sample_type_id":4,"image":"","prefix":"M20SOP","rows":null,"columns":null,"sample_type_name":"Fragment"},{"id":295,"name":"Fragment Stock","description":"Fragment stock in 1.5 mL tube, usually stored in M20 fridge.","min":0,"max":1000,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"{ \"min_conc\": 0.000000005, \"rec_conc\": 0.000000025, \"max_vol\": 1500, \"conc_callback\": \"nanodrop_dsdna\", \"short_description\":\"1.5 mL tube\", \"opentrons_labware\": \"24-well-1.5ml-rack\"}","vendor":"No vendor information","created_at":"2014-01-12T16:12:01.000-08:00","updated_at":"2018-09-19T18:46:35.000-07:00","unit":"Fragment","cost":50.0,"release_method":"return","release_description":"","sample_type_id":4,"image":"","prefix":"M20P","rows":null,"columns":null,"sample_type_name":"Fragment"},{"id":634,"name":"Digested DNA Stock","description":"A fragment of dsDNA that has already been digested with enzymes and has phosphorylated ends. Typically has sticky ends.","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"{ \"min_conc\": 0.0000000010, \"rec_conc\": 0.000000025, \"max_vol\": 1500, \"conc_callback\": \"nanodrop_dsdna\", \"short_description\":\"1.5 mL tube\", \"opentrons_labware\": \"24-well-1.5ml-rack\"}","vendor":"No vendor information","created_at":"2017-09-26T14:51:58.000-07:00","updated_at":"2018-09-27T13:19:48.000-07:00","unit":"Fragment","cost":0.01,"release_method":"return","release_description":"","sample_type_id":40,"image":"","prefix":"M20SOP","rows":null,"columns":null,"sample_type_name":"Digested DNA"}],"operation_type":{"name":"Purify Gel Slice","category":"Cloning","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Gel","sample_types":["Fragment","Digested DNA"],"object_types":["Gel Slice","Gel Slice"],"part":false,"array":false,"routing":"F","preferred_operation_type_id":73,"preferred_field_type_id":339,"choices":null},{"ftype":"sample","role":"output","name":"Fragment","sample_types":["Fragment","Digested DNA"],"object_types":["Fragment Stock","Digested DNA Stock"],"part":false,"array":false,"routing":"F","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Purify Gel Protocol\r\nneeds \"Cloning Libs/Cloning\"\r\nneeds \"Standard Libs/Debug Lib\"\r\n\r\n# This protocol purfies gel slices into DNA fragment stocks.\r\n\r\nclass Protocol\r\n  include Cloning\r\n  include Debug\r\n  \r\n  DENSITY = 1.0 / 1000.0 #grams per microliter\r\n  BUFFER_TO_GEL_RATIO = 3 #volumes of buffer per volume of gel\r\n  ISOPROP_TO_GEL_RATIO = 1 #volumes of isopropanol per volume of gel (qiagen kit recommendation)\r\n  MAX_COLUMN_VOLUME = 700.0 #microliters\r\n  \r\n  def main\r\n    current_taken_items = []\r\n    output_volumes = {\"Fragment\" =\u003e 27}\r\n    operations.sort_by! {|op| op.input(\"Gel\").item.id}\r\n    \r\n    # While testing, assign a random weight value\r\n    operations.each{ |op| op.set_input_data(\"Gel\", :weight, Random.rand / 10.0 + 0.1)  } if debug\r\n    \r\n    # Dissolved gel solution should be 1/5th isopropanol and the rest gel + QG. Always uses max amount of QG so that all tubes have same weight.\r\n    operations.each do |op|\r\n        current_volume = (op.input_data(\"Gel\", :weight).to_f / DENSITY)\r\n        op.temporary[:is_divided] = current_volume \u003e MAX_COLUMN_VOLUME / (BUFFER_TO_GEL_RATIO + ISOPROP_TO_GEL_RATIO + 1)\r\n        if op.temporary[:is_divided]\r\n            op.temporary[:buffer_to_add]  = ((8.0 / 5.0) * MAX_COLUMN_VOLUME - current_volume).round(2)\r\n            op.temporary[:isoprop_to_add]  = ((2.0 / 5.0) * MAX_COLUMN_VOLUME).round(2)\r\n        else\r\n            op.temporary[:buffer_to_add]  = ((4.0 / 5.0) * MAX_COLUMN_VOLUME - current_volume).round(2)\r\n            op.temporary[:isoprop_to_add]  = ((1.0 / 5.0) * MAX_COLUMN_VOLUME).round(2)\r\n        end\r\n    end\r\n    \r\n    robust_make [\"Fragment\"], current_taken_items\r\n    \r\n    robust_take_inputs [\"Gel\"], current_taken_items, interactive: true\r\n    \r\n    show do\r\n        title \"Warm up water\"\r\n        check \"Add #{(operations.running.count*output_volumes[\"Fragment\"]*1.5).round(2)} µl of water to a tube. Label it \\\"Water\\\" and place on the 55C heat block.\"\r\n    end\r\n    \r\n    show do\r\n      title \"Add QG buffer and isopropanol\"\r\n      note \"This protocol uses the QIAquick Gel Extraction Kit\"\r\n      note \"Add the following volumes of QG buffer and isopropanol to the corresponding tubes.\"\r\n      table operations.start_table\r\n      .input_item(\"Gel\")\r\n      .custom_column(heading: \"QG Volume in µl\", checkable: true) { |op| op.temporary[:buffer_to_add]}\r\n      .custom_column(heading: \"Isopropanol Volume in µl\", checkable: true) { |op| op.temporary[:isoprop_to_add]}\r\n      .end_table\r\n    end\r\n    \r\n    show do\r\n      title \"Place all tubes in a 55 degree heat block\"\r\n      timer initial: { hours: 0, minutes: 10, seconds: 0}\r\n      note \"Vortex every few minutes to speed up the process.\"\r\n      note \"If the gel is not fully dissolved after 10 minutes, continue heating until fully dissolved.\"\r\n    end\r\n    \r\n    tube_count = operations.count\r\n    table_matrix = Array.new(tube_count + 1) {Array.new(2) {\"Error\"}}\r\n    table_matrix[0] = [\"1.5 ml tube (dissolved gel slice)\", \"Spin column number\"]\r\n    operations.each_with_index do |op, op_index|\r\n        table_matrix[op_index+1] = [op.input(\"Gel\").item.id.to_s, (op_index+1).to_s]\r\n        op.temporary[:tube_number] = op_index+1\r\n    end\r\n    \r\n    show do\r\n        title \"Transfer to spin columns and spin\"\r\n        check \"Get out #{tube_count} new spin columns and collection tubes and label from 1 to #{tube_count}\"\r\n        check \"Transfer 700 µl (no more) of liquid from the 1.5 ml tubes containing dissolved gel slices to the spin columns according to the following chart:\"\r\n        table table_matrix\r\n        warning \"Do not discard 1.5 ml tubes yet!\" if operations.any? {|op| op.temporary[:is_divided]}\r\n        centrifuge tube_count, 13000, 1\r\n        check \"Discard flow through.\"\r\n    end\r\n    \r\n    tube_count = operations.select{|op| op.temporary[:is_divided]}.count\r\n    table_matrix = Array.new(tube_count + 1) {Array.new(2) {\"Error\"}}\r\n    table_matrix[0] = [\"1.5 ml tube (dissolved gel slice)\", \"Spin column number\"]\r\n    operations.select{|op| op.temporary[:is_divided]}.each_with_index do |op, op_index|\r\n        table_matrix[op_index+1] = [op.input(\"Gel\").item.id.to_s, op.temporary[:tube_number].to_s]\r\n    end\r\n    \r\n    show do\r\n        title \"Transfer additional liquid from 1.5 ml tubes to spin columns and spin\"\r\n        check \"Transfer 700 µl of liquid from the 1.5 ml tubes containing dissolved gel slices to the spin columns according to the following chart:\"\r\n        table table_matrix\r\n        check \"Discard empty 1.5 ml tubes.\"\r\n        centrifuge tube_count, 13000, 1\r\n        check \"Discard flow through.\"\r\n    end if operations.any? {|op| op.temporary[:is_divided]}\r\n    \r\n    show do\r\n      title \"Add more QG Buffer\"\r\n      check \"Add 500 µl QG buffer to columns.\"\r\n      check \"Spin at 13000 rpm for 1 min.\"\r\n      check \"Discard flow through.\"\r\n    end\r\n    \r\n    show do\r\n      title \"Add PE Buffer\"\r\n      check \"Add 400 µl PE buffer to columns.\"\r\n      check \"Let columns sit at room temperature for 5 minutes.\"\r\n      timer initial: { hours: 0, minutes: 5, seconds: 0}\r\n      check \"Spin at 13000 rpm for 60 seconds.\"\r\n      check \"Discard flow through.\"\r\n    end\r\n    \r\n    show do\r\n      title \"Add additional PE Buffer\"\r\n      check \"Add 400 µl PE buffer to columns (repeat of last step).\"\r\n      check \"Let columns sit at room temperature for 2 minutes.\"\r\n      timer initial: { hours: 0, minutes: 2, seconds: 0}\r\n      check \"Spin at 13000 rpm for 60 seconds.\"\r\n      check \"Discard flow through.\"\r\n      check \"Spin at 13000 rpm for 5 minutes to remove residual PE buffer from columns.\"\r\n    end\r\n    \r\n    table_matrix = Array.new(operations.count + 1) {Array.new(2) {\"Error\"}}\r\n    table_matrix[0] = [\"Spin column number\", \"Item ID to write on 1.5 mL tube\"]\r\n    operations.each_with_index do |op, op_index|\r\n        table_matrix[op_index + 1][0] = (op_index + 1).to_s\r\n        table_matrix[op_index + 1][1] = op.output(\"Fragment\").item.id.to_s\r\n    end\r\n    \r\n    show do\r\n        title \"Transfer columns to fresh tubes\"\r\n        check \"Get out #{operations.count} new 1.5 mL tubes.\"\r\n        check \"Label new tubes with the following item IDs, and transfer columns to these new tubes according to the following table:\"\r\n        table table_matrix\r\n        check \"Discard round bottom collection tubes.\"\r\n    end\r\n    \r\n    show do\r\n        title \"Elute with water\"\r\n        check \"Pipette 30 µl from the tube of warm water on the 55C heat block into the CENTER of each column without touching the membrane\"\r\n        check \"Let the columns sit for 4 minutes on the bench.\"\r\n        centrifuge operations.count, 13000, 1\r\n        check \"Discard columns, but KEEP 1.5 ml tubes containing flowthrough!\"\r\n        check \"Discard empty tube of warm water.\"\r\n    end\r\n\r\n    operations.each do |op|\r\n      op.input(\"Gel\").item.mark_as_deleted\r\n      op.input(\"Gel\").item.save\r\n    end\r\n    \r\n    robust_release_inputs [\"Gel\"], current_taken_items, interactive: true\r\n    \r\n    store_outputs_with_volumes output_volumes, current_taken_items, interactive: true\r\n    check_for_errors\r\n    \r\n    log_info \"op id\", operations[0].operation_type.id\r\n    \r\n    return {}\r\n    \r\n  end\r\n  \r\nend","precondition":"def precondition(op)\n  true\nend","cost_model":"# Purify Gel Slice Cost Model\n\n# All related numbers come from 'Damp Lab Services_Dec2019'\n# materials are calculated on 'Damp Lab Services_Dec2019'\n# l stands for labor\n\ndef cost(op)\n    l = 39.59 * Parameter.get_float('labor rate (min)')\n    {labor: 0, materials: 2.68+l }\nend","documentation":"This is run after \u003cb\u003eExtract Fragment\u003c/b\u003e and produces a linear dsDNA stock item. The extracted gel slice is dissolved in buffer and purified using a spin column; the purified fragment is then nanodropped, and the concentration is recorded.\u003cbr\u003e\u003cbr\u003e\n\n------\u003cb\u003eOutput Volume(s)\u003c/b\u003e------\u003cbr\u003e\nFragment -\u003e 12 µl","test":"","timing":null}}]}